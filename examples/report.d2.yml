data-sources:
  data: 
    type: local-yml-file
    path: processes.yml
contents:
  - type: heading
    level: 1
    text: Introduction
    contents:
    - type: paragraph
      text: This report covers activities planning and execution for work-package __{{ data.work_package_id }}__.
      requires: ["data"]
  - type: heading
    level: 1
    text: Required Materials
    contents:
    - type: basic-data-table
      columns: ["Item", "Cost", "Quantity", "Total"]
      row_query: data.materials
      requires: ["data"]
      cells:
        - "{{ row.name }}"
        - "{{ row.cost }}"
        - "{{ row.quantity }}"
        - "{{ row.quantity * row.cost }}"
    - type: jinja-query
      defines: TOTAL_MATERIAL_COST
      expression: >
        {% set buff =  [] %}
        {% for item in data.materials %}
        {% set tmp = buff.append(item.cost * item.quantity) %}
        {% endfor %}
        {% set TOTAL_MATERIAL_COST = buff | sum %}
      requires: ["data"]
    - type: paragraph
      text: "Total material costs: __{{ TOTAL_MATERIAL_COST }}__"
      requires: ["TOTAL_MATERIAL_COST"]
  - type: heading
    level: 1
    text: Required Tools
    contents:
    - type: unordered-list
      item_query: data.tools
      item_text: "{{ item }}"
      requires: ["data"]

